{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { login, getUser } from '../../../api/api';\nexport default {\n  data() {\n    return {\n      loginAccount: '',\n      password: ''\n    };\n  },\n  methods: {\n    login() {\n      if (!this.loginAccount) {\n        this.$message({\n          message: '请输入用户名',\n          type: 'warning'\n        });\n        return;\n      }\n      if (!this.password) {\n        this.$message({\n          message: '请输入密码',\n          type: 'warning'\n        });\n        return;\n      }\n      var params = {\n        loginAccount: this.loginAccount,\n        password: this.password\n      };\n      login(params).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '登陆成功',\n            type: 'success'\n          });\n          var that = this;\n          var token = res.data.token;\n          this.$store.commit('user/setToken', token);\n          this.getUserInfo();\n          setTimeout(function () {\n            that.$router.push(\"/index\");\n          }, 500);\n        } else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n    getUserInfo() {\n      getUser().then(res => {\n        if (res.code == 1000) {\n          this.$store.commit('user/setUser', JSON.stringify(res.data));\n        }\n      });\n    }\n  },\n  created() {},\n  mounted() {}\n};","map":{"version":3,"names":["login","getUser","data","loginAccount","password","methods","$message","message","type","params","then","res","code","that","token","$store","commit","getUserInfo","setTimeout","$router","push","error","JSON","stringify","created","mounted"],"sources":["src/views/system/login/login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"login1\">\r\n    </div>\r\n    <div class=\"login4\">\r\n        <div class=\"login5\">\r\n          <img src=\"../../../assets/image/logo.png\" style=\"width: 50px;position: relative; top: 13px;right: 6px\">\r\n            <div class=\"login6\">\r\n                <i class=\"iconfont icon-r-setting\" style=\"font-size: 42px;margin-right: 10px;\"></i>\r\n                欢迎使用旅游推荐后台管理系统\r\n            </div>\r\n            <el-input prefix-icon=\"el-icon-user\" v-model=\"loginAccount\" placeholder=\"请输入登录账号\"></el-input>\r\n            <el-input prefix-icon=\"el-icon-star-off\" type=\"password\" v-model=\"password\" placeholder=\"请输入用户密码\"></el-input>\r\n            <div class=\"login8\" @click=\"login\">\r\n                登 录\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {login,getUser} from '../../../api/api'\r\n  export default {\r\n    data() {\r\n      return{\r\n        loginAccount: '',\r\n        password: ''\r\n      }\r\n    },\r\n    methods: {\r\n        login() {\r\n            if(!this.loginAccount) {\r\n                this.$message({\r\n                    message: '请输入用户名',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            if(!this.password) {\r\n                this.$message({\r\n                    message: '请输入密码',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            var params = {\r\n                loginAccount: this.loginAccount,\r\n                password: this.password\r\n            }\r\n            login(params).then(res => {\r\n                if(res.code == 1000) {\r\n                    this.$message({\r\n                        message: '登陆成功',\r\n                        type: 'success'\r\n                    });\r\n                    var that = this\r\n                    var token = res.data.token\r\n                    this.$store.commit('user/setToken', token)\r\n                    this.getUserInfo()\r\n                    setTimeout(function() {\r\n                        that.$router.push(\"/index\")\r\n                    },500)\r\n                } else {\r\n                    this.$message.error(res.message);\r\n                }\r\n            })\r\n        },\r\n        getUserInfo() {\r\n            getUser().then(res => {\r\n                if(res.code == 1000) {\r\n                    this.$store.commit('user/setUser', JSON.stringify(res.data))\r\n                }\r\n            })\r\n        },\r\n    },\r\n    created() {\r\n\r\n    },\r\n    mounted() {\r\n\r\n    }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n.login {\r\n    width: 100%;\r\n    height: 100%;\r\n    font-family: '黑体';\r\n    display: flex;\r\n}\r\n.login1 {\r\n    width: 60%;\r\n    height: 100%;\r\n    background-image: url('../../../assets/image/image 2.png');\r\n    background-size: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n}\r\n.login2 {\r\n    font-size: 35px;\r\n    font-weight: bold;\r\n}\r\n.login3 {\r\n    margin-top: 10px;\r\n    letter-spacing: 2px;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n}\r\n.login4 {\r\n    width: 40%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.login5 {\r\n    width: 80%;\r\n    height: 80%;\r\n    flex-direction: column;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n}\r\n.login6 {\r\n    font-size: 30px;\r\n}\r\n.login7 {\r\n    width: 100%;\r\n    text-align: right;\r\n    cursor: pointer;\r\n}\r\n.login8 {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #ffffff;\r\n    width: 70%;\r\n    height: 50px;\r\n    cursor: pointer;\r\n    border-radius: 20px;\r\n    background-color: #3E78F3;\r\n}\r\n</style>\r\n"],"mappings":";AAsBA,SAAAA,KAAA,EAAAC,OAAA;AACA;EACAC,KAAA;IACA;MACAC,YAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAL,MAAA;MACA,UAAAG,YAAA;QACA,KAAAG,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,UAAAJ,QAAA;QACA,KAAAE,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,IAAAC,MAAA;QACAN,YAAA,OAAAA,YAAA;QACAC,QAAA,OAAAA;MACA;MACAJ,KAAA,CAAAS,MAAA,EAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAN,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,IAAAK,IAAA;UACA,IAAAC,KAAA,GAAAH,GAAA,CAAAT,IAAA,CAAAY,KAAA;UACA,KAAAC,MAAA,CAAAC,MAAA,kBAAAF,KAAA;UACA,KAAAG,WAAA;UACAC,UAAA;YACAL,IAAA,CAAAM,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAd,QAAA,CAAAe,KAAA,CAAAV,GAAA,CAAAJ,OAAA;QACA;MACA;IACA;IACAU,YAAA;MACAhB,OAAA,GAAAS,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAG,MAAA,CAAAC,MAAA,iBAAAM,IAAA,CAAAC,SAAA,CAAAZ,GAAA,CAAAT,IAAA;QACA;MACA;IACA;EACA;EACAsB,QAAA,GAEA;EACAC,QAAA,GAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}