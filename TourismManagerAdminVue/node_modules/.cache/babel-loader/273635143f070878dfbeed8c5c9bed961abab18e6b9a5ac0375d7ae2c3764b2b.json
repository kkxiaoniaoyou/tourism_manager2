{"ast":null,"code":"import { getSysCommentsPage, removeSysComments } from '../../../api/api';\nexport default {\n  data() {\n    return {\n      loading: true,\n      search: {\n        content: \"\",\n        attractionsId: \"\",\n        userId: \"\",\n        avatar: \"\",\n        createBy: \"\",\n        createTime: \"\",\n        updateBy: \"\",\n        updateTime: \"\",\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      tableData: []\n    };\n  },\n  components: {},\n  methods: {\n    searchPage() {\n      this.search.pageNumber = 1;\n      this.query();\n    },\n    query() {\n      getSysCommentsPage(this.search).then(res => {\n        if (res.code == 1000) {\n          this.tableData = res.data.records;\n          this.total = res.data.total;\n          this.loading = false;\n        } else {\n          this.$notify.error({\n            title: '错误',\n            message: res.message\n          });\n        }\n      });\n    },\n    refresh() {\n      this.search.content = \"\";\n      this.search.attractionsId = \"\";\n      this.search.userId = \"\";\n      this.search.avatar = \"\";\n      this.search.createBy = \"\";\n      this.search.updateBy = \"\";\n      this.query();\n    },\n    handleCurrentChange(val) {\n      this.search.pageNumber = val;\n      this.query();\n    },\n    handleSizeChange(val) {\n      this.search.pageSize = val;\n      this.query();\n    },\n    handleSelectionChange(val) {},\n    deleteDataBtn() {\n      this.$confirm('确定删除选中的' + this.remove.length + '条数据?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteDate(this.remove.join(\",\"));\n      }).catch(() => {});\n    },\n    deleteDate(ids) {\n      removeSysComments({\n        ids: ids\n      }).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n          this.query();\n        } else {\n          this.$notify.error({\n            title: '错误',\n            message: res.message\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    this.attractionsId = this.$route.query.id;\n    this.query();\n  }\n};","map":{"version":3,"names":["getSysCommentsPage","removeSysComments","data","loading","search","content","attractionsId","userId","avatar","createBy","createTime","updateBy","updateTime","pageNumber","pageSize","total","tableData","components","methods","searchPage","query","then","res","code","records","$notify","error","title","message","refresh","handleCurrentChange","val","handleSizeChange","handleSelectionChange","deleteDataBtn","$confirm","remove","length","confirmButtonText","cancelButtonText","type","deleteDate","join","catch","ids","$message","mounted","$route","id"],"sources":["src/views/system/comments/comments.vue"],"sourcesContent":["<template>\r\n  <div class=\"_comments\">\r\n    <div class=\"search-table\">\r\n      <div class=\"search\">\r\n        <el-row :gutter=\"10\" style=\"padding:10px\">\r\n          <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n            <span class=\"search-title\">内容:</span>\r\n            <el-input style=\"margin-top:10px\" size=\"mini\" placeholder=\"请输入内容\" v-model=\"search.content\">\r\n            </el-input>\r\n          </el-col>\r\n          <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n            <span class=\"search-title\">评论人:</span>\r\n            <el-input style=\"margin-top:10px\" size=\"mini\" placeholder=\"请输入评论人\" v-model=\"search.createBy\">\r\n            </el-input>\r\n          </el-col>\r\n          <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n            <el-button style=\"margin-top:10px\" size=\"mini\"   type=\"primary\"\r\n              @click=\"searchPage\">查询</el-button>\r\n            <el-button style=\"margin-top:10px\" size=\"mini\"   @click=\"refresh\">重置</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <div class=\"table\">\r\n        <el-row style=\"padding-top:10px;margin-left:10px\">\r\n        </el-row>\r\n        <el-table v-loading=\"loading\" :data=\"tableData\" @selection-change=\"handleSelectionChange\" stripe\r\n          style=\"width: 100%\">\r\n          <el-table-column type=\"selection\" width=\"55\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"content\" label=\"内容\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"createBy\" label=\"评论人\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"createTime\" label=\"评论时间\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-popconfirm style=\"margin-left:5px\" confirm-button-text='确认' cancel-button-text='取消'\r\n                icon=\"el-icon-info\" icon-color=\"red\" title=\"确认删除选中的数据？\" @confirm=\"deleteDate(scope.row.id)\">\r\n                <el-button size=\"mini\" slot=\"reference\" type=\"danger\">删除</el-button>\r\n              </el-popconfirm>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-pagination background layout=\"total, sizes, prev, pager, next, jumper\" :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"search.pageSize\" :current-page=\"search.pageNumber\" @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\" :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSysCommentsPage, removeSysComments } from '../../../api/api'\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      search: {\r\n        content: \"\",\r\n        attractionsId: \"\",\r\n        userId: \"\",\r\n        avatar: \"\",\r\n        createBy: \"\",\r\n        createTime: \"\",\r\n        updateBy: \"\",\r\n        updateTime: \"\",\r\n        pageNumber: 1,\r\n        pageSize: 10\r\n      },\r\n      total: 0,\r\n      tableData: []\r\n    }\r\n  },\r\n  components: {\r\n  },\r\n  methods: {\r\n    searchPage() {\r\n      this.search.pageNumber = 1\r\n      this.query()\r\n    },\r\n    query() {\r\n      getSysCommentsPage(this.search).then(res => {\r\n        if (res.code == 1000) {\r\n          this.tableData = res.data.records\r\n          this.total = res.data.total\r\n          this.loading = false\r\n        } else {\r\n          this.$notify.error({\r\n            title: '错误',\r\n            message: res.message\r\n          });\r\n        }\r\n      })\r\n    },\r\n    refresh() {\r\n      this.search.content = \"\"\r\n      this.search.attractionsId = \"\"\r\n      this.search.userId = \"\"\r\n      this.search.avatar = \"\"\r\n      this.search.createBy = \"\"\r\n      this.search.updateBy = \"\"\r\n      this.query()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.search.pageNumber = val\r\n      this.query()\r\n    },\r\n    handleSizeChange(val) {\r\n      this.search.pageSize = val\r\n      this.query()\r\n    },\r\n    handleSelectionChange(val) {\r\n\r\n    },\r\n    deleteDataBtn() {\r\n      this.$confirm('确定删除选中的' + this.remove.length + '条数据?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.deleteDate(this.remove.join(\",\"))\r\n      }).catch(() => {\r\n\r\n      });\r\n    },\r\n    deleteDate(ids) {\r\n      removeSysComments({ ids: ids }).then(res => {\r\n        if (res.code == 1000) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n          this.query()\r\n        } else {\r\n          this.$notify.error({\r\n            title: '错误',\r\n            message: res.message\r\n          });\r\n        }\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.attractionsId = this.$route.query.id\r\n    this.query()\r\n  }\r\n}\r\n</script>\r\n<style lang=scss scoped>\r\n.search-table {\r\n  width: 100%;\r\n}\r\n\r\n.search {\r\n  background: #ffffff;\r\n  border-radius: 7px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1)\r\n}\r\n\r\n.table {\r\n  background: #ffffff;\r\n  border-radius: 7px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);\r\n  margin-top: 10px\r\n}\r\n\r\n.el-col {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n}\r\n\r\n.search-title {\r\n  font-family: '黑体';\r\n  float: right;\r\n  white-space: nowrap;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  width: 63px;\r\n  text-align: right;\r\n}\r\n\r\n.el-table {\r\n  padding: 10px;\r\n}\r\n\r\n.el-dialog__header {\r\n  border-bottom: 1px solid #F4F8F9 !important;\r\n}\r\n\r\n.el-dialog {\r\n  border-radius: 10px !important;\r\n}\r\n</style>"],"mappings":"AAsDA,SAAAA,kBAAA,EAAAC,iBAAA;AACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,MAAA;QACAC,OAAA;QACAC,aAAA;QACAC,MAAA;QACAC,MAAA;QACAC,QAAA;QACAC,UAAA;QACAC,QAAA;QACAC,UAAA;QACAC,UAAA;QACAC,QAAA;MACA;MACAC,KAAA;MACAC,SAAA;IACA;EACA;EACAC,UAAA,GACA;EACAC,OAAA;IACAC,WAAA;MACA,KAAAf,MAAA,CAAAS,UAAA;MACA,KAAAO,KAAA;IACA;IACAA,MAAA;MACApB,kBAAA,MAAAI,MAAA,EAAAiB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAP,SAAA,GAAAM,GAAA,CAAApB,IAAA,CAAAsB,OAAA;UACA,KAAAT,KAAA,GAAAO,GAAA,CAAApB,IAAA,CAAAa,KAAA;UACA,KAAAZ,OAAA;QACA;UACA,KAAAsB,OAAA,CAAAC,KAAA;YACAC,KAAA;YACAC,OAAA,EAAAN,GAAA,CAAAM;UACA;QACA;MACA;IACA;IACAC,QAAA;MACA,KAAAzB,MAAA,CAAAC,OAAA;MACA,KAAAD,MAAA,CAAAE,aAAA;MACA,KAAAF,MAAA,CAAAG,MAAA;MACA,KAAAH,MAAA,CAAAI,MAAA;MACA,KAAAJ,MAAA,CAAAK,QAAA;MACA,KAAAL,MAAA,CAAAO,QAAA;MACA,KAAAS,KAAA;IACA;IACAU,oBAAAC,GAAA;MACA,KAAA3B,MAAA,CAAAS,UAAA,GAAAkB,GAAA;MACA,KAAAX,KAAA;IACA;IACAY,iBAAAD,GAAA;MACA,KAAA3B,MAAA,CAAAU,QAAA,GAAAiB,GAAA;MACA,KAAAX,KAAA;IACA;IACAa,sBAAAF,GAAA,GAEA;IACAG,cAAA;MACA,KAAAC,QAAA,kBAAAC,MAAA,CAAAC,MAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAnB,IAAA;QACA,KAAAoB,UAAA,MAAAL,MAAA,CAAAM,IAAA;MACA,GAAAC,KAAA,QAEA;IACA;IACAF,WAAAG,GAAA;MACA3C,iBAAA;QAAA2C,GAAA,EAAAA;MAAA,GAAAvB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAsB,QAAA;YACAL,IAAA;YACAZ,OAAA;UACA;UACA,KAAAR,KAAA;QACA;UACA,KAAAK,OAAA,CAAAC,KAAA;YACAC,KAAA;YACAC,OAAA,EAAAN,GAAA,CAAAM;UACA;QACA;MACA;IACA;EACA;EACAkB,QAAA;IACA,KAAAxC,aAAA,QAAAyC,MAAA,CAAA3B,KAAA,CAAA4B,EAAA;IACA,KAAA5B,KAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}