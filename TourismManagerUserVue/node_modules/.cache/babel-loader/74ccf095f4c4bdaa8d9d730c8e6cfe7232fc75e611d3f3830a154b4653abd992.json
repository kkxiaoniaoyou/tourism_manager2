{"ast":null,"code":"import { getSysHotelOrderPage, getSysAttractionOrderPage, editSysAttractionOrder, editSysHotelOrder } from '../../api/api';\nimport headers from '@/components/header';\nimport bottoms from '@/components/bottom';\nexport default {\n  data() {\n    return {\n      search: {\n        userId: \"\",\n        pageSize: 12,\n        pageNumber: 1\n      },\n      search1: {\n        userId: \"\",\n        pageSize: 12,\n        pageNumber: 1\n      },\n      total: 100,\n      tableData: [],\n      total1: 100,\n      tableData1: [],\n      activeName: \"first\",\n      id: \"\",\n      state: \"\",\n      num: \"\",\n      date1: \"\",\n      people: [],\n      people1: {},\n      dialogVisible: false,\n      dialogVisible1: false\n    };\n  },\n  components: {\n    headers,\n    bottoms\n  },\n  methods: {\n    editSysAttractionOrder() {\n      var param = {\n        id: this.id,\n        state: 2\n      };\n      editSysAttractionOrder(param).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '取消申请成功,请等待审核通过',\n            type: 'success'\n          });\n          this.close();\n          this.getSysAttractionOrderPage();\n        }\n      });\n    },\n    editSysHotelOrder() {\n      var param = {\n        id: this.id,\n        state: 2\n      };\n      editSysHotelOrder(param).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '取消申请成功,请等待审核通过',\n            type: 'success'\n          });\n          this.close1();\n          this.getSysHotelOrderPage();\n        }\n      });\n    },\n    toOrderInfo(index) {\n      var data = this.tableData[index];\n      this.id = data.id;\n      this.people = JSON.parse(data.people);\n      this.num = data.num;\n      this.date1 = data.time;\n      this.state = data.state;\n      this.dialogVisible = true;\n    },\n    toOrderInfo1(index) {\n      var data = this.tableData1[index];\n      this.id = data.id;\n      this.people1 = JSON.parse(data.people);\n      this.num = data.num;\n      this.date1 = data.time;\n      this.state = data.state;\n      this.dialogVisible1 = true;\n    },\n    close() {\n      this.id = \"\";\n      this.people = [];\n      this.num = \"\";\n      this.date1 = \"\";\n      this.state = \"\";\n      this.dialogVisible = false;\n    },\n    close1() {\n      this.id = \"\";\n      this.people = {};\n      this.num = \"\";\n      this.date1 = \"\";\n      this.state = \"\";\n      this.dialogVisible1 = false;\n    },\n    getSysAttractionOrderPage() {\n      getSysAttractionOrderPage(this.search).then(res => {\n        if (res.code == 1000) {\n          this.tableData = res.data.records;\n          this.total = res.data.total;\n        }\n      });\n    },\n    getSysHotelOrderPage() {\n      getSysHotelOrderPage(this.search1).then(res => {\n        if (res.code == 1000) {\n          this.tableData1 = res.data.records;\n          this.total1 = res.data.total;\n        }\n      });\n    },\n    handleCurrentChange(val) {\n      this.search.pageNumber = val;\n      this.getSysAttractionOrderPage();\n    },\n    handleCurrentChange1(val) {\n      this.search1.pageNumber = val;\n      this.getSysHotelOrderPage();\n    },\n    handleClick(tab, event) {\n      console.log(tab, event);\n    }\n  },\n  created() {},\n  mounted() {\n    this.search.userId = JSON.parse(window.localStorage.getItem(\"user_info\")).id;\n    this.search1.userId = JSON.parse(window.localStorage.getItem(\"user_info\")).id;\n    this.getSysAttractionOrderPage();\n    this.getSysHotelOrderPage();\n  }\n};","map":{"version":3,"names":["getSysHotelOrderPage","getSysAttractionOrderPage","editSysAttractionOrder","editSysHotelOrder","headers","bottoms","data","search","userId","pageSize","pageNumber","search1","total","tableData","total1","tableData1","activeName","id","state","num","date1","people","people1","dialogVisible","dialogVisible1","components","methods","param","then","res","code","$message","message","type","close","close1","toOrderInfo","index","JSON","parse","time","toOrderInfo1","records","handleCurrentChange","val","handleCurrentChange1","handleClick","tab","event","console","log","created","mounted","window","localStorage","getItem"],"sources":["src/views/order/order.vue"],"sourcesContent":["<template>\r\n  <div class=\"attractions\">\r\n    <headers></headers>\r\n    <div class=\"order\" style=\"margin-top:20px\">\r\n        <el-tabs style=\"width:80%\" v-model=\"activeName\" type=\"card\" @tab-click=\"handleClick\">\r\n            <el-tab-pane label=\"景点\" name=\"first\">\r\n                <div class=\"attractions1\">\r\n                    <div class=\"attractions3\">\r\n                        <div class=\"index5\" @click=\"toOrderInfo(index)\" v-for=\"(item,index) in tableData\" :key=\"index\" style=\"margin-top:15px\">\r\n                        <img style=\"width:100%\" :src=\"item.images.split(',')[0]\">\r\n                        <div class=\"index6\">\r\n                            <div class=\"index7\">{{item.name}}</div>\r\n                            <div class=\"index8\">{{item.introduce}}</div>\r\n                        </div>\r\n                        </div>\r\n                    </div>\r\n                    <el-pagination\r\n                        background\r\n                        :page-size=\"search.pageSize\"\r\n                        layout=\"prev, pager, next\"\r\n                        @current-change=\"handleCurrentChange\"\r\n                        :total=\"total\">\r\n                    </el-pagination>\r\n                </div>\r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"酒店\" name=\"second\">\r\n                <div class=\"attractions1\">\r\n                    <div class=\"attractions3\">\r\n                        <div class=\"index5\" @click=\"toOrderInfo1(index)\" v-for=\"(item,index) in tableData1\" :key=\"index\" style=\"margin-top:15px\">\r\n                        <img style=\"width:100%\" :src=\"item.images.split(',')[0]\">\r\n                        <div class=\"index6\">\r\n                            <div class=\"index7\">{{item.name}}</div>\r\n                            <div class=\"index8\">{{item.introduce}}</div>\r\n                        </div>\r\n                        </div>\r\n                    </div>\r\n                    <el-pagination\r\n                        background\r\n                        :page-size=\"search1.pageSize\"\r\n                        layout=\"prev, pager, next\"\r\n                        @current-change=\"handleCurrentChange1\"\r\n                        :total=\"total1\">\r\n                    </el-pagination>\r\n                </div>\r\n            </el-tab-pane>\r\n        </el-tabs>\r\n    </div>\r\n    <bottoms></bottoms>\r\n    <el-dialog\r\n    title=\"预约详情\"\r\n    :visible.sync=\"dialogVisible\"\r\n    width=\"40%\">\r\n    <span>\r\n        <div style=\"margin-bottom:10px\">\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 0\">未确认</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 1\">已确认</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 2\">取消中</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 3\">已取消</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 4\">取消失败</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 5\">已使用</el-button>\r\n        </div>\r\n        <el-input-number   v-model=\"num\" :min=\"1\" :max=\"10\"></el-input-number>\r\n        <el-date-picker   style=\"margin-left:20px\"\r\n        v-model=\"date1\"\r\n        type=\"date\"\r\n        placeholder=\"选择预约日期\">\r\n        </el-date-picker>\r\n        <div class=\"attractionsInfo9\" v-for=\"(item,index) in people\" :key=\"index\">\r\n            <el-input  disabled v-model=\"item.name\" placeholder=\"请输入姓名\"></el-input>\r\n            <el-input  disabled style=\"margin-left:10px\" v-model=\"item.tel\" placeholder=\"请输入电话\"></el-input>\r\n            <el-input  disabled style=\"margin-left:10px\" v-model=\"item.idCard\" placeholder=\"请输入身份证号\"></el-input>\r\n        </div>\r\n    </span>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"close\" >关 闭</el-button>\r\n        <el-button type=\"primary\" v-if=\"state != 5 && state != 3 && state != 2 && state != 4\" @click=\"editSysAttractionOrder\" >取消预约</el-button>\r\n    </span>\r\n    </el-dialog>\r\n\r\n    <el-dialog\r\n    title=\"预约详情\"\r\n    :visible.sync=\"dialogVisible1\"\r\n    width=\"40%\">\r\n    <span>\r\n        <div style=\"margin-bottom:10px\">\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 0\">未确认</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 1\">已确认</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 2\">取消中</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 3\">已取消</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 4\">取消失败</el-button>\r\n          <el-button size=\"mini\" type=\"primary\" plain v-if=\"state == 5\">已使用</el-button>\r\n        </div>\r\n        <el-input-number disabled  v-model=\"num\" :min=\"1\" :max=\"10\"></el-input-number>\r\n        <el-date-picker disabled  style=\"margin-left:20px\"\r\n        v-model=\"date1\"\r\n        type=\"date\"\r\n        placeholder=\"选择预约日期\">\r\n        </el-date-picker>\r\n        <div class=\"attractionsInfo9\">\r\n          <el-input  disabled v-model=\"people1.name\" placeholder=\"请输入姓名\"></el-input>\r\n          <el-input  disabled style=\"margin-left:10px\" v-model=\"people1.tel\" placeholder=\"请输入电话\"></el-input>\r\n          <el-input  disabled style=\"margin-left:10px\" v-model=\"people1.idCard\" placeholder=\"请输入身份证号\"></el-input>\r\n        </div>\r\n    </span>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button  @click=\"close1\">关 闭</el-button>\r\n        <el-button type=\"primary\" v-if=\"state != 5 && state != 3 && state != 2 && state != 4\" @click=\"editSysHotelOrder\" >取消预约</el-button>\r\n    </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {getSysHotelOrderPage,getSysAttractionOrderPage,editSysAttractionOrder,editSysHotelOrder} from '../../api/api'\r\n  import headers from '@/components/header'\r\n  import bottoms from '@/components/bottom'\r\n  export default {\r\n    data() {\r\n      return{\r\n        search: {\r\n          userId: \"\",\r\n          pageSize: 12,\r\n          pageNumber: 1,\r\n        },\r\n        search1: {\r\n          userId: \"\",\r\n          pageSize: 12,\r\n          pageNumber: 1,\r\n        },\r\n        total:100,\r\n        tableData: [],\r\n        total1:100,\r\n        tableData1: [],\r\n        activeName: \"first\",\r\n        id: \"\",\r\n        state: \"\",\r\n        num: \"\",\r\n        date1: \"\",\r\n        people: [],\r\n        people1: {},\r\n        dialogVisible: false,\r\n        dialogVisible1: false\r\n      }\r\n    },\r\n    components: {\r\n      headers,\r\n      bottoms\r\n    },\r\n    methods: {\r\n      editSysAttractionOrder() {\r\n        var param = {\r\n          id: this.id,\r\n          state: 2,\r\n        }\r\n        editSysAttractionOrder(param).then(res => {\r\n          if(res.code == 1000) {\r\n            this.$message({\r\n                message: '取消申请成功,请等待审核通过',\r\n                type: 'success'\r\n            });\r\n            this.close()\r\n            this.getSysAttractionOrderPage()\r\n          }\r\n        })\r\n      },\r\n      editSysHotelOrder() {\r\n        var param = {\r\n          id: this.id,\r\n          state: 2,\r\n        }\r\n        editSysHotelOrder(param).then(res => {\r\n          if(res.code == 1000) {\r\n            this.$message({\r\n                message: '取消申请成功,请等待审核通过',\r\n                type: 'success'\r\n            });\r\n            this.close1()\r\n            this.getSysHotelOrderPage()\r\n          }\r\n        })\r\n      },\r\n      toOrderInfo(index) {\r\n        var data = this.tableData[index]\r\n        this.id = data.id\r\n        this.people = JSON.parse(data.people)\r\n        this.num = data.num\r\n        this.date1 = data.time\r\n        this.state = data.state\r\n        this.dialogVisible = true\r\n      },\r\n      toOrderInfo1(index) {\r\n        var data = this.tableData1[index]\r\n        this.id = data.id\r\n        this.people1 = JSON.parse(data.people)\r\n        this.num = data.num\r\n        this.date1 = data.time\r\n        this.state = data.state\r\n        this.dialogVisible1 = true\r\n      },\r\n      close() {\r\n        this.id = \"\"\r\n        this.people = []\r\n        this.num = \"\"\r\n        this.date1 = \"\"\r\n        this.state = \"\"\r\n        this.dialogVisible = false\r\n      },\r\n      close1() {\r\n        this.id = \"\"\r\n        this.people = {}\r\n        this.num = \"\"\r\n        this.date1 = \"\"\r\n        this.state = \"\"\r\n        this.dialogVisible1 = false\r\n      },\r\n      getSysAttractionOrderPage() {\r\n        getSysAttractionOrderPage(this.search).then(res => {\r\n          if (res.code == 1000) {\r\n            this.tableData = res.data.records\r\n            this.total = res.data.total\r\n          }\r\n        })\r\n      },\r\n      getSysHotelOrderPage() {\r\n        getSysHotelOrderPage(this.search1).then(res => {\r\n          if (res.code == 1000) {\r\n            this.tableData1 = res.data.records\r\n            this.total1 = res.data.total\r\n          }\r\n        })\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.search.pageNumber = val\r\n        this.getSysAttractionOrderPage()\r\n      }, \r\n      handleCurrentChange1(val) {\r\n        this.search1.pageNumber = val\r\n        this.getSysHotelOrderPage()\r\n      }, \r\n      handleClick(tab, event) {\r\n        console.log(tab, event);\r\n      }\r\n    },\r\n    created() {\r\n     \r\n    },\r\n    mounted() {\r\n      this.search.userId = JSON.parse(window.localStorage.getItem(\"user_info\")).id\r\n      this.search1.userId = JSON.parse(window.localStorage.getItem(\"user_info\")).id\r\n      this.getSysAttractionOrderPage()\r\n      this.getSysHotelOrderPage()\r\n    }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n   @import url('../../assets/css/attractions.css');\r\n   .order {\r\n       width: 100%;\r\n       display: flex;\r\n       justify-content: center;\r\n   }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}