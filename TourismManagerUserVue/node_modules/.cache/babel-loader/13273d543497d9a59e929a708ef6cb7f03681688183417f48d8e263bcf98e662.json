{"ast":null,"code":"import { getSysHotelById, getSysHotelItemList, saveSysHotelOrder } from '../../api/api';\nimport headers from '@/components/header';\nimport bottoms from '@/components/bottom';\nexport default {\n  data() {\n    return {\n      id: \"\",\n      dialogVisible: false,\n      content: \"\",\n      date1: \"\",\n      num: \"\",\n      people: {\n        name: \"\",\n        tel: \"\",\n        idCard: \"\"\n      },\n      info: {},\n      hotel: [],\n      radio1: \"\"\n    };\n  },\n  components: {\n    headers,\n    bottoms\n  },\n  methods: {\n    getSysHotelItemList() {\n      getSysHotelItemList({\n        id: this.id\n      }).then(res => {\n        if (res.code == 1000) {\n          this.hotel = res.data;\n        }\n      });\n    },\n    closeOrder() {\n      this.date1 = \"\";\n      this.num = \"\";\n      this.radio1 = '';\n      this.people = {\n        name: \"\",\n        tel: \"\",\n        idCard: \"\"\n      };\n      this.dialogVisible = false;\n    },\n    saveOrder() {\n      if (!this.date1) {\n        this.$message({\n          message: '请选择预约时间',\n          type: 'warning',\n          duration: 1000\n        });\n        return;\n      }\n      if (!this.people.name) {\n        this.$message({\n          message: '请完善预约人姓名',\n          type: 'warning',\n          duration: 1000\n        });\n        return;\n      }\n      if (!this.people.tel) {\n        this.$message({\n          message: '请完善预约人联系方式',\n          type: 'warning',\n          duration: 1000\n        });\n        return;\n      }\n      if (!this.people.idCard) {\n        this.$message({\n          message: '请完善预约人证件号',\n          type: 'warning',\n          duration: 1000\n        });\n        return;\n      }\n      if (!this.radio1) {\n        this.$message({\n          message: '请选择房型',\n          type: 'warning',\n          duration: 1000\n        });\n        return;\n      }\n      var param = {\n        hotelId: this.id,\n        num: this.num,\n        itemId: this.radio1,\n        time: this.date1,\n        people: JSON.stringify(this.people)\n      };\n      saveSysHotelOrder(param).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '预约成功，请等待确认',\n            type: 'success'\n          });\n          this.closeOrder();\n        } else {\n          this.$message({\n            message: res.message,\n            type: 'warning'\n          });\n        }\n      });\n    },\n    getSysHotelById() {\n      getSysHotelById({\n        id: this.id\n      }).then(res => {\n        if (res.code == 1000) {\n          this.info = res.data;\n        }\n      });\n    },\n    toOrder() {\n      this.dialogVisible = true;\n    }\n  },\n  created() {},\n  mounted() {\n    this.id = this.$route.query.id;\n    this.getSysHotelById();\n    this.getSysHotelItemList();\n  }\n};","map":{"version":3,"names":["getSysHotelById","getSysHotelItemList","saveSysHotelOrder","headers","bottoms","data","id","dialogVisible","content","date1","num","people","name","tel","idCard","info","hotel","radio1","components","methods","then","res","code","closeOrder","saveOrder","$message","message","type","duration","param","hotelId","itemId","time","JSON","stringify","toOrder","created","mounted","$route","query"],"sources":["src/views/hotel/hotelInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"attractionsInfo\">\r\n    <headers></headers>\r\n    <div class=\"attractionsInfo1\">\r\n        <div class=\"attractionsInfo2\">\r\n            <div class=\"attractionsInfo3\">\r\n                <el-carousel height=\"500px\">\r\n                    <el-carousel-item v-for=\"(item,index) in info.images.split(',')\" :key=\"index\">\r\n                        <img style=\"width:100%;height:100%\" :src=\"item\">\r\n                    </el-carousel-item>\r\n                </el-carousel>\r\n            </div>\r\n            <div class=\"attractionsInfo4\">\r\n                <div class=\"attractionsInfo5\">{{info.name}}</div>\r\n                <div class=\"\" style=\"margin-top: 10px;margin-left: 20px;\">所属景区：{{info.attractions}}</div>\r\n                <div class=\"\" style=\"margin-top: 10px;margin-left: 20px;\">地址：{{info.address}}</div>\r\n                <div class=\"attractionsInfo6\">{{info.introduce}}</div>\r\n                <div class=\"attractionsInfo7\" style=\"margin-left:10px\">\r\n                    <el-button  type=\"primary\" plain @click=\"toOrder\">立即预定</el-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <el-dialog\r\n    title=\"预定\"\r\n    :visible.sync=\"dialogVisible\"\r\n    width=\"40%\">\r\n    <span>\r\n        <div>\r\n            <el-radio style=\"margin-top:10px\" v-for=\"(item,index) in hotel\" :key=\"index\"  v-model=\"radio1\" :label=\"item.id\" border>{{item.name}} - 数量{{item.num}} - 价格{{item.price}}</el-radio>\r\n        </div>\r\n        <el-input-number style=\"margin-top:10px\"  v-model=\"num\" :min=\"1\" :max=\"10\"></el-input-number>\r\n        <el-date-picker  style=\"margin-left:20px;margin-top:10px\"\r\n        v-model=\"date1\"\r\n        type=\"date\"\r\n        value-format=\"yyyy-MM-dd\"\r\n        placeholder=\"选择预定日期\">\r\n        </el-date-picker>\r\n        <div class=\"attractionsInfo9\">\r\n            <el-input  v-model=\"people.name\" placeholder=\"请输入姓名\"></el-input>\r\n            <el-input  style=\"margin-left:10px\" v-model=\"people.tel\" placeholder=\"请输入电话\"></el-input>\r\n            <el-input  style=\"margin-left:10px\" v-model=\"people.idCard\" placeholder=\"请输入身份证号\"></el-input>\r\n        </div>\r\n    </span>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"closeOrder\" >取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveOrder\"  >确 定</el-button>\r\n    </span>\r\n    </el-dialog>\r\n    <bottoms></bottoms>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {getSysHotelById,getSysHotelItemList,saveSysHotelOrder} from '../../api/api'\r\n  import headers from '@/components/header'\r\n  import bottoms from '@/components/bottom'\r\n  export default {\r\n    data() {\r\n      return{\r\n        id: \"\",\r\n        dialogVisible: false,\r\n        content: \"\",\r\n        date1: \"\",\r\n        num: \"\",\r\n        people:{\r\n            name: \"\",\r\n            tel: \"\",\r\n            idCard: \"\"\r\n        },\r\n        info: {},\r\n        hotel: [],\r\n        radio1: \"\"\r\n      }\r\n    },\r\n    components: {\r\n      headers,\r\n      bottoms\r\n    },\r\n    methods: {\r\n      getSysHotelItemList() {\r\n        getSysHotelItemList({id:this.id}).then(res => {\r\n          if (res.code == 1000) {\r\n            this.hotel = res.data\r\n          }\r\n        })\r\n      },\r\n      closeOrder() {\r\n        this.date1 = \"\"\r\n        this.num = \"\"\r\n        this.radio1 = ''\r\n        this.people = \r\n        {\r\n          name: \"\",\r\n          tel: \"\",\r\n          idCard: \"\"\r\n        }\r\n        this.dialogVisible = false\r\n      },\r\n      saveOrder() {\r\n          if (!this.date1) {\r\n            this.$message({\r\n                message: '请选择预约时间',\r\n                type: 'warning',\r\n                duration: 1000\r\n            });\r\n            return\r\n          }\r\n          if (!this.people.name) {\r\n              this.$message({\r\n                  message: '请完善预约人姓名',\r\n                  type: 'warning',\r\n                  duration: 1000\r\n              });\r\n              return\r\n          }\r\n          if (!this.people.tel) {\r\n              this.$message({\r\n                  message: '请完善预约人联系方式',\r\n                  type: 'warning',\r\n                  duration: 1000\r\n              });\r\n              return\r\n          }\r\n          if (!this.people.idCard ) {\r\n              this.$message({\r\n                  message: '请完善预约人证件号',\r\n                  type: 'warning',\r\n                  duration: 1000\r\n              });\r\n              return\r\n          }\r\n          if (!this.radio1 ) {\r\n              this.$message({\r\n                  message: '请选择房型',\r\n                  type: 'warning',\r\n                  duration: 1000\r\n              });\r\n              return\r\n          }\r\n          var param = {\r\n            hotelId: this.id,\r\n            num: this.num,\r\n            itemId: this.radio1,\r\n            time: this.date1,\r\n            people: JSON.stringify(this.people)\r\n          }\r\n          saveSysHotelOrder(param).then(res => {\r\n              if (res.code == 1000) {\r\n                this.$message({\r\n                    message: '预约成功，请等待确认',\r\n                    type: 'success',\r\n                });\r\n                this.closeOrder()\r\n              } else {\r\n                this.$message({\r\n                    message: res.message,\r\n                    type: 'warning'\r\n                });\r\n              }\r\n          })\r\n      },\r\n      getSysHotelById() {\r\n        getSysHotelById({id:this.id}).then(res => {\r\n          if (res.code == 1000) {\r\n            this.info = res.data\r\n          }\r\n        })\r\n      },\r\n      toOrder() {\r\n        this.dialogVisible = true\r\n      },\r\n    },\r\n    created() {\r\n     \r\n    },\r\n    mounted() {\r\n      this.id = this.$route.query.id\r\n      this.getSysHotelById()\r\n      this.getSysHotelItemList()\r\n    }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n   @import url('../../assets/css/attractionsInfo.css');\r\n</style>"],"mappings":"AAsDA,SAAAA,eAAA,EAAAC,mBAAA,EAAAC,iBAAA;AACA,OAAAC,OAAA;AACA,OAAAC,OAAA;AACA;EACAC,KAAA;IACA;MACAC,EAAA;MACAC,aAAA;MACAC,OAAA;MACAC,KAAA;MACAC,GAAA;MACAC,MAAA;QACAC,IAAA;QACAC,GAAA;QACAC,MAAA;MACA;MACAC,IAAA;MACAC,KAAA;MACAC,MAAA;IACA;EACA;EACAC,UAAA;IACAf,OAAA;IACAC;EACA;EACAe,OAAA;IACAlB,oBAAA;MACAA,mBAAA;QAAAK,EAAA,OAAAA;MAAA,GAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAN,KAAA,GAAAK,GAAA,CAAAhB,IAAA;QACA;MACA;IACA;IACAkB,WAAA;MACA,KAAAd,KAAA;MACA,KAAAC,GAAA;MACA,KAAAO,MAAA;MACA,KAAAN,MAAA,GACA;QACAC,IAAA;QACAC,GAAA;QACAC,MAAA;MACA;MACA,KAAAP,aAAA;IACA;IACAiB,UAAA;MACA,UAAAf,KAAA;QACA,KAAAgB,QAAA;UACAC,OAAA;UACAC,IAAA;UACAC,QAAA;QACA;QACA;MACA;MACA,UAAAjB,MAAA,CAAAC,IAAA;QACA,KAAAa,QAAA;UACAC,OAAA;UACAC,IAAA;UACAC,QAAA;QACA;QACA;MACA;MACA,UAAAjB,MAAA,CAAAE,GAAA;QACA,KAAAY,QAAA;UACAC,OAAA;UACAC,IAAA;UACAC,QAAA;QACA;QACA;MACA;MACA,UAAAjB,MAAA,CAAAG,MAAA;QACA,KAAAW,QAAA;UACAC,OAAA;UACAC,IAAA;UACAC,QAAA;QACA;QACA;MACA;MACA,UAAAX,MAAA;QACA,KAAAQ,QAAA;UACAC,OAAA;UACAC,IAAA;UACAC,QAAA;QACA;QACA;MACA;MACA,IAAAC,KAAA;QACAC,OAAA,OAAAxB,EAAA;QACAI,GAAA,OAAAA,GAAA;QACAqB,MAAA,OAAAd,MAAA;QACAe,IAAA,OAAAvB,KAAA;QACAE,MAAA,EAAAsB,IAAA,CAAAC,SAAA,MAAAvB,MAAA;MACA;MACAT,iBAAA,CAAA2B,KAAA,EAAAT,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAG,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,KAAAJ,UAAA;QACA;UACA,KAAAE,QAAA;YACAC,OAAA,EAAAL,GAAA,CAAAK,OAAA;YACAC,IAAA;UACA;QACA;MACA;IACA;IACA3B,gBAAA;MACAA,eAAA;QAAAM,EAAA,OAAAA;MAAA,GAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAP,IAAA,GAAAM,GAAA,CAAAhB,IAAA;QACA;MACA;IACA;IACA8B,QAAA;MACA,KAAA5B,aAAA;IACA;EACA;EACA6B,QAAA,GAEA;EACAC,QAAA;IACA,KAAA/B,EAAA,QAAAgC,MAAA,CAAAC,KAAA,CAAAjC,EAAA;IACA,KAAAN,eAAA;IACA,KAAAC,mBAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}