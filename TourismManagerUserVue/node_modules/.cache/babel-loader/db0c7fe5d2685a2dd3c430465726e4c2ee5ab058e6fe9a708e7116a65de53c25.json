{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { login, getUser } from '../../api/api';\nexport default {\n  data() {\n    return {\n      loginAccount: \"\",\n      password: \"\"\n    };\n  },\n  methods: {\n    toRegister() {\n      this.$router.push(\"/register\");\n    },\n    toForget() {\n      this.$router.push(\"/forget\");\n    },\n    login() {\n      if (!this.loginAccount) {\n        this.$message({\n          message: '请输入用户名',\n          type: 'warning',\n          duration: 1000\n        });\n        return;\n      }\n      if (!this.password) {\n        this.$message({\n          message: '请输入密码',\n          type: 'warning'\n        });\n        return;\n      }\n      var params = {\n        loginAccount: this.loginAccount,\n        password: this.password\n      };\n      login(params).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '登陆成功',\n            type: 'success'\n          });\n          var that = this;\n          var token = res.data.token;\n          window.localStorage.setItem(\"user_token\", token);\n          this.getUserInfo();\n          setTimeout(function () {\n            that.$router.push(\"/\");\n          }, 500);\n        } else {\n          this.$message.error(res.message);\n        }\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    getUserInfo() {\n      getUser().then(res => {\n        if (res.code == 1000) {\n          window.localStorage.setItem(\"user_info\", JSON.stringify(res.data));\n        }\n      });\n    }\n  },\n  created() {},\n  mounted() {}\n};","map":{"version":3,"names":["login","getUser","data","loginAccount","password","methods","toRegister","$router","push","toForget","$message","message","type","duration","params","then","res","code","that","token","window","localStorage","setItem","getUserInfo","setTimeout","error","catch","e","console","log","JSON","stringify","created","mounted"],"sources":["src/views/logIn/logIn.vue"],"sourcesContent":["<template>\r\n    <div class=\"login\">\r\n        <div class=\"login1\">\r\n        </div>\r\n        <div class=\"login4\">\r\n            <div class=\"login5\">\r\n                <div class=\"login6\">\r\n                    <!-- <i class=\"iconfont icon-r-love\" style=\"font-size: 56px;\"></i><br> -->\r\n                    旅游管理系统\r\n                </div>\r\n                <el-input prefix-icon=\"el-icon-user\" v-model=\"loginAccount\" placeholder=\"请输入登录账号\"></el-input>\r\n                <el-input prefix-icon=\"el-icon-star-off\" type=\"password\" v-model=\"password\"\r\n                    placeholder=\"请输入用户密码\"></el-input>\r\n                <div class=\"login7\" @click=\"toForget\">\r\n                    忘记密码？\r\n                </div>\r\n                <button class=\"login8\" @click=\"login\">\r\n                    登 录\r\n                </button>\r\n                <button class=\"login9\" @click=\"toRegister\">\r\n                    注 册\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { login, getUser } from '../../api/api'\r\nexport default {\r\n    data() {\r\n        return {\r\n            loginAccount: \"\",\r\n            password: \"\",\r\n        }\r\n    },\r\n    methods: {\r\n        toRegister() {\r\n            this.$router.push(\"/register\")\r\n        },\r\n        toForget() {\r\n            this.$router.push(\"/forget\")\r\n        },\r\n        login() {\r\n            if (!this.loginAccount) {\r\n                this.$message({\r\n                    message: '请输入用户名',\r\n                    type: 'warning',\r\n                    duration: 1000\r\n                });\r\n                return;\r\n            }\r\n            if (!this.password) {\r\n                this.$message({\r\n                    message: '请输入密码',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            var params = {\r\n                loginAccount: this.loginAccount,\r\n                password: this.password\r\n            }\r\n            login(params).then(res => {\r\n                if (res.code == 1000) {\r\n                    this.$message({\r\n                        message: '登陆成功',\r\n                        type: 'success'\r\n                    });\r\n                    var that = this\r\n                    var token = res.data.token\r\n                    window.localStorage.setItem(\"user_token\", token)\r\n                    this.getUserInfo()\r\n                    setTimeout(function () {\r\n                        that.$router.push(\"/\")\r\n                    }, 500)\r\n                } else {\r\n                    this.$message.error(res.message);\r\n                }\r\n            }).catch((e) => {\r\n                console.log(e)\r\n            })\r\n        },\r\n        getUserInfo() {\r\n            getUser().then(res => {\r\n                if (res.code == 1000) {\r\n                    window.localStorage.setItem(\"user_info\", JSON.stringify(res.data))\r\n                }\r\n            })\r\n        },\r\n    },\r\n    created() {\r\n\r\n    },\r\n    mounted() {\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import url('../../assets/css/login.css');\r\n</style>\r\n"],"mappings":";AA4BA,SAAAA,KAAA,EAAAC,OAAA;AACA;EACAC,KAAA;IACA;MACAC,YAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,WAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,SAAA;MACA,KAAAF,OAAA,CAAAC,IAAA;IACA;IACAR,MAAA;MACA,UAAAG,YAAA;QACA,KAAAO,QAAA;UACAC,OAAA;UACAC,IAAA;UACAC,QAAA;QACA;QACA;MACA;MACA,UAAAT,QAAA;QACA,KAAAM,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,IAAAE,MAAA;QACAX,YAAA,OAAAA,YAAA;QACAC,QAAA,OAAAA;MACA;MACAJ,KAAA,CAAAc,MAAA,EAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAP,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,IAAAM,IAAA;UACA,IAAAC,KAAA,GAAAH,GAAA,CAAAd,IAAA,CAAAiB,KAAA;UACAC,MAAA,CAAAC,YAAA,CAAAC,OAAA,eAAAH,KAAA;UACA,KAAAI,WAAA;UACAC,UAAA;YACAN,IAAA,CAAAX,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAE,QAAA,CAAAe,KAAA,CAAAT,GAAA,CAAAL,OAAA;QACA;MACA,GAAAe,KAAA,CAAAC,CAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,CAAA;MACA;IACA;IACAJ,YAAA;MACAtB,OAAA,GAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAG,MAAA,CAAAC,YAAA,CAAAC,OAAA,cAAAQ,IAAA,CAAAC,SAAA,CAAAf,GAAA,CAAAd,IAAA;QACA;MACA;IACA;EACA;EACA8B,QAAA,GAEA;EACAC,QAAA,GAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}